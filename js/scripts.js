var isMobile,desktopOnlyOffset,frameWatcher,invoiceframe,clickWatcher,invoiceframeDoc,val_,workingCurrency,startX,scrollLeft,iframeStageDetection=0,mousePositionDown=!1;function getMobileStatus(){isMobile=!1,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substr(0,4)))&&(isMobile=!0)}function toggleMobileMenu(){document.getElementById("menuContents").style.display="grid"}function closeMenu(){document.getElementById("menuContents").removeAttribute("style")}function endVideo(){document.getElementById("videoContainer").style.display="none",document.getElementById("videoContainer_video0").innerHTML=""}function playVideo(){var e=document.getElementById("videoContainer_video0");e.innerHTML='<iframe id="videoContainerVideoPayload_0" src="https://www.youtube-nocookie.com/embed/ZIfJyq9RimM" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>',document.getElementById("videoContainer").style.display="grid",document.getElementById("videoContainerVideoPayload_0").width=e.clientWidth,document.getElementById("videoContainerVideoPayload_0").height=e.clientWidth/1.529}function setClickWatch(){document.querySelectorAll(".payloadItem_").forEach(function(e){"0"!=e.getAttribute("i")?e.style.display="none":e.style.display="grid"}),document.querySelectorAll(".choice_").forEach(function(e){var t=e.getAttribute("class");"0"!=e.getAttribute("i")?e.setAttribute("class",t):e.setAttribute("class",t+" iconography_hovered_subtle")}),document.getElementById("choices_").addEventListener("mousedown",function(e){mousePositionDown=!0,startX=e.pageX-document.getElementById("choices_").offsetLeft,scrollLeft=document.getElementById("choices_").scrollLeft}),document.getElementById("choices_").addEventListener("mouseleave",function(){mousePositionDown=!1}),document.getElementById("choices_").addEventListener("mouseup",function(){mousePositionDown=!1}),document.getElementById("choices_").addEventListener("mousemove",function(e){if(mousePositionDown){e.preventDefault();var t=3*(e.pageX-document.getElementById("choices_").offsetLeft-startX);document.getElementById("choices_").scrollLeft=scrollLeft-t}}),document.querySelectorAll(".choice_").forEach(function(e){e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("i");document.querySelectorAll(".payloadItem_").forEach(function(e){if(e.getAttribute("i")!=t)e.style.display="none";else{if(e.querySelectorAll(".featuresYTVideoLink")[0]){var n=e.querySelectorAll(".featuresYTVideoLink")[0],o=document.createElement("iframe");o.setAttribute("src",n.getAttribute("href")),o.setAttribute("frameborder","0"),o.setAttribute("allow","accelerometer; encrypted-media; gyroscope; picture-in-picture"),o.setAttribute("height","226"),o.setAttribute("width","400"),n.parentNode.replaceChild(o,n)}e.style.display="grid",setTimeout(function(){desktopOnlyOffset=0;document.getElementById("modularInformationBlock").clientHeight,document.getElementById("choices_").clientHeight,screen.height;scrollTo("choices_",desktopOnlyOffset)},200)}}),document.querySelectorAll(".choice_").forEach(function(e){var n=e.getAttribute("class").replace("iconography_hovered_subtle","");e.getAttribute("i")!=t?e.setAttribute("class",n):e.setAttribute("class",n+" iconography_hovered_subtle")}),document.getElementById("choices_").scrollWidth>.8*screen.width&&(console.log("scrollInitiated",t),animate(document.getElementById("choices_"),"scrollLeft","",document.getElementById("choices_").scrollLeft,80*t,750,!0))})})}function linkToOverride(e){var t=e;document.querySelectorAll(".payloadItem_").forEach(function(e){if(e.getAttribute("i")!=t)e.style.display="none";else{if(e.querySelectorAll(".featuresYTVideoLink")[0]){var n=e.querySelectorAll(".featuresYTVideoLink")[0],o=document.createElement("iframe");o.setAttribute("src",n.getAttribute("href")),o.setAttribute("frameborder","0"),o.setAttribute("allow","accelerometer; encrypted-media; gyroscope; picture-in-picture"),o.setAttribute("height","226"),o.setAttribute("width","400"),n.parentNode.replaceChild(o,n)}e.style.display="grid",setTimeout(function(){desktopOnlyOffset=0!=isMobile?0:180;var t=document.getElementById("modularInformationBlock").clientHeight,n=document.getElementById("choices_").clientHeight,o=screen.height;t<o&&(desktopOnlyOffset=(o-t)/2+n),scrollTo(e.getAttribute("id").replace("#",""),desktopOnlyOffset)},200)}}),document.querySelectorAll(".choice_").forEach(function(e){var n=e.getAttribute("class").replace("iconography_hovered_subtle","");e.getAttribute("i")!=t?e.setAttribute("class",n):e.setAttribute("class",n+" iconography_hovered_subtle")})}function scrollTo(e,t){var n=t||1,o=document.getElementById(e),i=window.scrollY?window.scrollY:0;animate(document.scrollingElement||document.documentElement,"scrollTop","",i,o.offsetTop-n,750,!0)}function animate(e,t,n,o,i,r,l){if(e){var c=(new Date).getTime(),a=setInterval(function(){var s=Math.min(1,((new Date).getTime()-c)/r);l?e[t]=o+s*(i-o)+n:e.style[t]=o+s*(i-o)+n,1===s&&clearInterval(a)},1);l?e[t]=o+n:e.style[t]=o+n}}function alterHTML(e,t,n){var o=document.createElement("div");switch(o.innerHTML=t,n){case"append":for(;o.children.length>0;)e.appendChild(o.children[0]);break;case"prepend":for(;o.children.length>0;)e.prepend(o.children[0])}}function setJSEnvironment(){try{if(!document.querySelectorAll(".mobileCloseOpenNOJS")[0]){var e=document.getElementById("menuContents");alterHTML(e,'<div class="menuLinkParent"><a class="menuLink mobileOnly mobileCloseOpenNOJS" onclick="closeMenu();"><i class="fas fa-times"></i></a></div>',"prepend")}e.setAttribute("class",e.getAttribute("class").replace("mc_noJS","")+" menuContentsMobile"),document.querySelectorAll(".mobileMenuShortcut")[0].setAttribute("style",""),document.getElementById("videoPlayButton").removeAttribute("href",""),document.getElementById("videoPlayButton").removeAttribute("target",""),document.getElementById("nonJavascriptMessage").style.display="none",document.getElementById("valueSelectorHolder").style.display="block",document.querySelectorAll(".demoBlockText")[0].style.display="block",document.querySelectorAll(".payButtonLiveDemoInvoice")[0].style.display="block",document.getElementById("infoButton01").removeAttribute("style",""),document.getElementById("infoButton01").addEventListener("click",function(){document.getElementById("furtherQuote").style.display="unset",document.getElementById("infoButton01").style.display="none"}),document.getElementById("furtherQuote").style.display="none"}catch(e){}}function randomString(e){for(var t="",n="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",o=e;o>0;--o)t+=n[Math.floor(Math.random()*n.length)];return t}function startTimerInvoice(){var e,t=0,n=14;e=59;var o=document.getElementById("countDownTimer");window.setInterval(function(){function i(){t++;var e=document.getElementById("timer-row__progress-bar"),n=document.getElementById("timer-row");e.style.width=n.clientWidth-(n.clientWidth-50)*((900-t)/900)}i(),"00"===e&&(e=Number(60),n--),1==e&&(e=String("00")),"00"!=e&&e--;var r=String(e).length>1?"":"0";o.innerHTML=n+":"+r+e,i()},1e3)}function invoiceframePaybuttonSublitAndFlyIntoFrameView(e){if(document.getElementById("donationCTA").innerHTML='<h2>Experience BTCPay Server and help Support the Project</h2><svg version="1.1" class="spinnerAnimated" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="283.46px" height="283.46px" viewBox="0 0 283.46 283.46" enable-background="new 0 0 283.46 283.46" xml:space="preserve"><circle fill="none" stroke="#329f65" stroke-width="30" stroke-linecap="round" stroke-miterlimit="10" cx="141.73" cy="141.73" r="106.762"/></svg><p class="genIn_">Generating your invoice...</p>',workingCurrency=workingCurrency||"USD",!invoiceframe){var t=val_||5;invoiceHolder=document.createElement("div"),invoiceHolder.setAttribute("id","invoiceHolder_"),(invoiceframe=document.createElement("iframe")).setAttribute("class","iframe_"),invoiceframe.setAttribute("id","modalIframeReusable"),invoiceframe.setAttribute("onLoad","window.informOfProgress(event, this)"),invoiceframe.setAttribute("srcdoc",'<!doctype html><html><body><form method="POST" id="invoiceframePaybutton" action="https://mainnet.demo.btcpayserver.org/api/v1/invoices"><input type="hidden" name="storeId" value="EErYwCthBNfJUpuU1etH1uhg3x1YVH1q1F2zez7u1AAX" /><input type="hidden" name="price" value="'+t+'" /><input type="hidden" name="currency" value="'+workingCurrency+'" /><input type="image" src="" name="submit" style="width:209px"></form></body></html>'),document.getElementById("don_Par_sPa").appendChild(invoiceHolder),document.getElementById("invoiceHolder_").appendChild(invoiceframe)}frameWatcher=setInterval(function(){2==iframeStageDetection&&(clearInterval(frameWatcher),document.getElementById("donationCTA").setAttribute("class","flyAwayCTA01"),setTimeout(function(){document.getElementById("donationCTA").style.display="none";var e=document.getElementById("invoiceHolder_");(e.style.opacity="1",e.style.transform="translateY(0px)scale(1)",e.style["transform-origin"]="50% 0%",invoiceframe.style["min-height"]="720px",e.style["min-height"]="720px",document.getElementById("don_Par_sPa").style.height="720px",screen.height<=720+document.getElementById("promoArea").getBoundingClientRect().top)&&scrollTo("invoiceHolder_",screen.height-720>0?(screen.height-720)/2:20)},300)),1==iframeStageDetection&&(clickWatcher||(invoiceframe=document.getElementById("modalIframeReusable"),(invoiceframeDoc=invoiceframe.contentDocument).getElementById("invoiceframePaybutton")&&(invoiceframeDoc.getElementById("invoiceframePaybutton").submit(),clickWatcher=1)))},500)}function adjustValue(e,t,n){var o=document.querySelectorAll(".finalValue_")[0].getAttribute("value"),i=Number(o);i=i<=1?1:i;var r=" onkeyup=\"adjustValue('verify', event, this)\"";if("minus"==e){var l=i-1>=1?i-1:1;document.querySelectorAll(".finalValue_")[0].outerHTML='<input class="finalValue_ bounce_" value="'+l+'" type="text" placeholder="'+l+'"'+r+"/>",val_=l}if("plus"==e){var c=i+1>=1?i+1:1;document.querySelectorAll(".finalValue_")[0].outerHTML='<input class="finalValue_ bounce_" value="'+c+'" type="text" placeholder="'+c+'"'+r+"/>",val_=c}if("verify"==e){0!=isNaN(Number(t.key))&&1!=[".","Backspace","ArrowUp","ArrowRight","ArrowDown","ArrowLeft"].includes(t.key)?(document.querySelectorAll(".finalValue_")[0].outerHTML='<input class="finalValue_ bounce_" value="5" type="text" placeholder="5"'+r+"/>",document.querySelectorAll(".finalValue_")[0].focus(),val_=5):(n.value=n.value,val_=n.value)}i<1&&(document.querySelectorAll(".finalValue_")[0].innerHTML=1)}function setCurrency(e){workingCurrency=e.value}function openCurrencyOptions(e){document.getElementById("cOpt_").setAttribute("open",!0)}getMobileStatus(),document.querySelectorAll("a").forEach(function(e){try{"#"==e.getAttribute("href").substr(0,1)&&"#_"!=e.getAttribute("href").substr(0,2)&&e.addEventListener("click",function(t){return t.preventDefault(),scrollTo(e.getAttribute("href").replace("#",""),50),!1})}catch(e){}}),getMobileStatus(),setClickWatch(),setJSEnvironment(),window.onresize=function(){getMobileStatus(),setJSEnvironment(),closeMenu()},window.onscroll=function(){var e=-.2*window.scrollY,t=(window.scrollY,1-e/-500),n=document.getElementById("promoArea");0==isMobile?(n.style.transform="translateY("+e+"px)",n.style.opacity=t):(n.style.transform="translateY(0px)",n.style.opacity=1),document.getElementById("modularInformationBlock").offsetTop-window.scrollY<=.5*screen.height?document.querySelectorAll(".scrollPrompt")[0].style.visibility="hidden":document.querySelectorAll(".scrollPrompt")[0].style.visibility="visible"},window.informOfProgress=function(e,t){iframeStageDetection++;try{"about:srcdoc"===t.contentWindow.location.href&&iframeStageDetection>=3&&(window.location="/")}catch(e){this.console.log(e)}iframeStageDetection>=3&&(window.location="/"),console.log("Debug: frame stage: "+iframeStageDetection)};
